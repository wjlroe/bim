language: rust
os:
  - linux
rust: stable
cache:
  directories:
    - "$HOME/.cargo"
    - "$HOME/.multirust"
    - target
before_script:
  - export PATH="$PATH:$HOME/.cargo/bin"
  - curl https://pre-commit.com/install-local.py | python -
  - rustup component add rustfmt
script:
  - cargo fmt --version
  - pre-commit run --all-files
  - cargo build
  - cargo test
