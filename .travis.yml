language: rust
os:
  - linux
rust: stable
cache: cargo
before_script:
  - export PATH="$PATH:$HOME/.cargo/bin"
  - curl http://pre-commit.com/install-local.py | python
  - rustup install nightly
  - rustup component add rustfmt-preview --toolchain nightly
script:
  - rustup run nightly rustfmt --version
  - pre-commit run --all-files
  - cargo build
  - cargo test
